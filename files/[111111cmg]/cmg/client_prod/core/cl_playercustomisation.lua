local a=module("cfg/cfg_clothing")local function b(c)if type(c)=="string"and string.sub(c,1,1)=="p"then return true,tonumber(string.sub(c,2))else return false,tonumber(c)end end;function CMG.getDrawables(d)local e,f=b(d)if e then return GetNumberOfPedPropDrawableVariations(PlayerPedId(),f)else return GetNumberOfPedDrawableVariations(PlayerPedId(),f)end end;function CMG.getDrawableTextures(d,g)local e,f=b(d)if e then return GetNumberOfPedPropTextureVariations(PlayerPedId(),f,g)else return GetNumberOfPedTextureVariations(PlayerPedId(),f,g)end end;function tvRP.getCustomization()local h=PlayerPedId()local i={}i.modelhash=GetEntityModel(h)for j=0,20 do i[j]={GetPedDrawableVariation(h,j),GetPedTextureVariation(h,j),GetPedPaletteVariation(h,j)}end;for j=0,10 do i["p"..j]={GetPedPropIndex(h,j),math.max(GetPedPropTextureIndex(h,j),0)}end;return i end;local k=false;function tvRP.setCustomization(i,l,m)if i then local h=PlayerPedId()local n=nil;if i.modelhash~=nil then n=i.modelhash elseif i.model~=nil then n=GetHashKey(i.model)end;local o=CMG.loadModel(n)local p=GetEntityModel(h)if o then if p~=o or l then k=true;local q=CMG.getWeapons()local r=GetEntityHealth(h)SetPlayerModel(PlayerId(),n)Wait(0)CMG.giveWeapons(q,true)if m==nil or m==false then print("[CMG] Customisation, setting health to ",r)tvRP.setHealth(r)end;TriggerServerEvent("CMG:reapplyFaceData")TriggerServerEvent("CMG:getPlayerTattoos")h=PlayerPedId()else print("[CMG] Same model detected, not changing model.")end;SetModelAsNoLongerNeeded(n)for s,t in pairs(i)do if s~="model"and s~="modelhash"then if tonumber(s)then s=tonumber(s)end;local e,f=b(s)if e then if t[1]<0 then ClearPedProp(h,f)else SetPedPropIndex(h,f,t[1],t[2],t[3]or 2)end else SetPedComponentVariation(h,f,t[1],t[2],t[3]or 2)end end end;k=false else print("[CMG] Failed to load model",n)end end end;function CMG.isPedScriptGuidChanging()return k end;function CMG.loadCustomisationPreset(u)local v=a.presets[u]assert(v,string.format("Preset %s does not exist.",u))if v.model then tvRP.setCustomization({modelhash=v.model})Citizen.Wait(100)end;local w=PlayerPedId()if v.components then for x,y in pairs(v.components)do SetPedComponentVariation(w,x,y[1],y[2],y[3])end end;if v.props then for z,A in pairs(v.props)do SetPedPropIndex(w,z,A[1],A[2],A[3])end end end;SetVisualSettingFloat("ped.lod.distance.high",200.0)SetVisualSettingFloat("ped.lod.distance.medium",400.0)SetVisualSettingFloat("ped.lod.distance.low",700.0)