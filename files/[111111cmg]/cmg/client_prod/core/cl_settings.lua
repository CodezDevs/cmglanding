local a=module("cfg/cfg_settings")RMenu.Add('settingsmenu','settings',RageUI.CreateMenu("","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"cmg_settingsui","cmg_settingsui"))RMenu:Get('settingsmenu','settings'):SetSubtitle("~b~CMG Settings")RMenu.Add('settingsmenu','weaponswhitelist',RageUI.CreateSubMenu(RMenu:Get('settingsmenu','settings'),"","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"cmg_settingsui","cmg_settingsui"))RMenu:Get('settingsmenu','weaponswhitelist'):SetSubtitle("~b~Custom Weapons Owned")RMenu.Add('settingsmenu','generateaccesscode',RageUI.CreateSubMenu(RMenu:Get('settingsmenu','weaponswhitelist'),"","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"cmg_settingsui","cmg_settingsui"))RMenu:Get('settingsmenu','generateaccesscode'):SetSubtitle("~b~Generate Access Code")RMenu.Add('settingsmenu','viewwhitelisted',RageUI.CreateSubMenu(RMenu:Get('settingsmenu','generateaccesscode'),"","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"cmg_settingsui","cmg_settingsui"))RMenu:Get('settingsmenu','viewwhitelisted'):SetSubtitle("~b~View Whilelisted Users")RMenu.Add('settingsmenu','graphicpresets',RageUI.CreateSubMenu(RMenu:Get('settingsmenu','settings'),"","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"cmg_settingsui","cmg_settingsui"))RMenu:Get('settingsmenu','graphicpresets'):SetSubtitle("~b~Graphic Presets")RMenu.Add('settingsmenu','killeffects',RageUI.CreateSubMenu(RMenu:Get('settingsmenu','settings'),"","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"cmg_settingsui","cmg_settingsui"))RMenu:Get('settingsmenu','killeffects'):SetSubtitle("~b~Kill Effects")RMenu.Add('settingsmenu','bloodeffects',RageUI.CreateSubMenu(RMenu:Get('settingsmenu','settings'),"","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"cmg_settingsui","cmg_settingsui"))RMenu:Get('settingsmenu','bloodeffects'):SetSubtitle("~b~Blood Effects")local b=0;local c=0;local d=0;local e=false;local f=false;local g=false;local h=false;Citizen.CreateThread(function()local i=GetResourceKvpString("cmg_diagonalweapons")or"false"if i=="false"then b=false;TriggerEvent("CMG:setVerticalWeapons")else b=true;TriggerEvent("CMG:setDiagonalWeapons")end;local j=GetResourceKvpString("cmg_frontars")or"false"if j=="false"then c=false;TriggerEvent("CMG:setBackAR")else c=true;TriggerEvent("CMG:setFrontAR")end;local k=GetResourceKvpString("cmg_hitmarkersounds")or"false"if k=="false"then d=false;TriggerEvent("CMG:hsSoundsOff")else d=true;TriggerEvent("CMG:hsSoundsOn")end;local l=GetResourceKvpString("cmg_reducedchatopacity")or"false"if l=="false"then f=false;TriggerEvent("CMG:chatReduceOpacity",false)else f=true;TriggerEvent("CMG:chatReduceOpacity",true)end;local m=GetResourceKvpString("cmg_hideeventannouncement")or"false"if m=="false"then g=false else g=true end;local n=GetResourceKvpString("cmg_healthpercentage")or"false"if n=="false"then h=false else h=true end end)function CMG.setDiagonalWeaponSetting(o)SetResourceKvp("cmg_diagonalweapons",tostring(o))end;function CMG.setFrontARSetting(o)SetResourceKvp("cmg_frontars",tostring(o))end;function CMG.setHitMarkerSetting(o)SetResourceKvp("cmg_hitmarkersounds",tostring(o))end;function CMG.setCODHitMarkerSetting(o)SetResourceKvp("cmg_codhitmarkersounds",tostring(o))end;function CMG.setReducedChatOpacity(p)SetResourceKvp("cmg_reducedchatopacity",tostring(p))end;function CMG.setHideEventAnnouncementFlag(p)SetResourceKvp("cmg_hideeventannouncement",tostring(p))end;function CMG.getHideEventAnnouncementFlag()return g end;function CMG.setShowHealthPercentageFlag(p)SetResourceKvp("cmg_healthpercentage",tostring(p))end;function CMG.getShowHealthPercentageFlag()return h end;local function q(p)RageUI.CloseAll()RageUI.Visible(RMenu:Get('settingsmenu','settings'),p)end;local r={{"50%",0.5},{"60%",0.6},{"70%",0.7},{"80%",0.8},{"90%",0.9},{"100%",1.0},{"150%",1.5},{"200%",2.0},{"1000%",10.0}}local s={"50%","60%","70%","80%","90%","100%","150%","200%","1000%"}local t=6;local u={}local v;local w;local x;local y;RegisterNetEvent("CMG:gotCustomWeaponsOwned",function(z)print("gotCustomWeaponsOwned",dump(z))u=z end)RegisterNetEvent("CMG:generatedAccessCode",function(A)print("got accessCode",A)x=A end)RegisterNetEvent("CMG:getWhitelistedUsers",function(B)y=B end)local C={}local function D(E,F)return C[E.name..F.name]end;local function G(E)local H=false;for I,F in pairs(E.presets)do if C[E.name..F.name]then H=true;C[E.name..F.name]=nil end end;if H then for J,K in pairs(E.default)do SetVisualSettingFloat(J,K)end end end;local function L(F)for J,K in pairs(F.values)do SetVisualSettingFloat(J,K)end end;local function M(E,F,N)G(E)if N then C[E.name..F.name]=true;L(F)end;local O=json.encode(C)SetResourceKvp("cmg_graphic_presets",O)end;local P={"0%","5%","10%","15%","20%","25%","30%","35%","40%","45%","50%","55%","60%","65%","70%","75%","80%","85%","90%","95%","100%"}local Q={0.0,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,1.0}local R={"25%","50%","75%","100%","125%","150%","175%","200%","250%","300%","350%","400%","450%","500%","750%","1000%"}local S={0.25,0.5,0.75,1.0,1.25,1.5,1.75,2.0,2.5,3.0,3.5,4.0,4.5,5.0,7.5,10.0}local T={"0.1s","0.2s","0.3s","0.4s","0.5s","0.6s","0.7s","0.8s","0.9s","1s","1.25s","1.5s","1.75s","2.0s"}local U={100,200,300,400,500,600,700,800,900,1000,1250,1500,1750,2000}local V={"Disabled","Fireworks","Celebration","Firework Burst","Water Explosion","Ramp Explosion","Gas Explosion","Electrical Spark","Electrical Explosion","Concrete Impact","EMP 1","EMP 2","EMP 3","Spike Mine","Kinetic Mine","Tar Mine","Short Burst","Fog Sphere","Glass Smash","Glass Drop","Falling Leaves","Wood Smash","Train Smoke","Money","Confetti","Marbles","Sparkles"}local W={{"DISABLED","DISABLED",1.0},{"scr_indep_fireworks","scr_indep_firework_shotburst",0.2},{"scr_xs_celebration","scr_xs_confetti_burst",1.2},{"scr_rcpaparazzo1","scr_mich4_firework_burst_spawn",1.0},{"particle cut_finale1","cs_finale1_car_explosion_surge_spawn",1.0},{"des_fib_floor","ent_ray_fbi5a_ramp_explosion",1.0},{"des_gas_station","ent_ray_paleto_gas_explosion",0.5},{"core","ent_dst_electrical",1.0},{"core","ent_sht_electrical_box",1.0},{"des_vaultdoor","ent_ray_pro1_concrete_impacts",1.0},{"scr_xs_dr","scr_xs_dr_emp",1.0},{"scr_xs_props","scr_xs_exp_mine_sf",1.0},{"veh_xs_vehicle_mods","exp_xs_mine_emp",1.0},{"veh_xs_vehicle_mods","exp_xs_mine_spike",1.0},{"veh_xs_vehicle_mods","exp_xs_mine_kinetic",1.0},{"veh_xs_vehicle_mods","exp_xs_mine_tar",1.0},{"scr_stunts","scr_stunts_shotburst",1.0},{"scr_tplaces","scr_tplaces_team_swap",1.0},{"des_fib_glass","ent_ray_fbi2_window_break",1.0},{"des_fib_glass","ent_ray_fbi2_glass_drop",2.5},{"des_stilthouse","ent_ray_fam3_falling_leaves",1.0},{"des_stilthouse","ent_ray_fam3_wood_frags",1.0},{"des_train_crash","ent_ray_train_smoke",1.0},{"core","ent_brk_banknotes",2.0},{"core","ent_dst_inflate_ball_clr",1.0},{"core","ent_dst_gen_gobstop",1.0},{"core","ent_sht_telegraph_pole",1.0}}local X={"Disabled","BikerFilter","CAMERA_BW","drug_drive_blend01","glasses_blue","glasses_brown","glasses_Darkblue","glasses_green","glasses_purple","glasses_red","helicamfirst","hud_def_Trevor","Kifflom","LectroDark","MP_corona_tournament_DOF","MP_heli_cam","mugShot","NG_filmic02","REDMIST_blend","trevorspliff","ufo","underwater","WATER_LAB","WATER_militaryPOOP","WATER_river","WATER_salton"}local Y={lightning=false,pedFlash=false,pedFlashRGB={11,11,11},pedFlashIntensity=4,pedFlashTime=1,screenFlash=false,screenFlashRGB={11,11,11},screenFlashIntensity=4,screenFlashTime=1,particle=1,timecycle=1,timecycleTime=1}local Z=0;local function _()local a0=json.encode(Y)SetResourceKvp("cmg_kill_effects",a0)end;local a1={head=1,body=1,arms=1,legs=1}local function a2()local a3=json.encode(a1)SetResourceKvp("cmg_blood_effects",a3)end;Citizen.CreateThread(function()Citizen.Wait(1000)local O=GetResourceKvpString("cmg_graphic_presets")if O and O~=""then C=json.decode(O)or{}end;for I,E in pairs(a.presets)do for I,F in pairs(E.presets)do if D(E,F)then L(F)end end end;local a0=GetResourceKvpString("cmg_kill_effects")if a0 and a0~=""then local a4=json.decode(a0)for a5,N in pairs(a4)do if Y[a5]then Y[a5]=N end end end;local a3=GetResourceKvpString("cmg_blood_effects")if a3 and a3~=""then local a4=json.decode(a3)for a5,N in pairs(a4)do if a1[a5]then a1[a5]=N end end end end)RageUI.CreateWhile(1.0,RMenu:Get('settingsmenu','settings'),nil,function()RageUI.IsVisible(RMenu:Get('settingsmenu','settings'),true,true,true,function()if CMG.isNewPlayer()then drawNativeNotification("Press ~INPUT_REPLAY_START_STOP_RECORDING_SECONDARY~ to toggle the Settings Menu.")end;RageUI.List("Render Distance Modifier",s,t,"~g~Lowering this will increase your FPS!",{},true,function(a6,a7,a8,a9)if a8 then end;t=a9 end,function()end,nil)local function aa()TriggerEvent("CMG:setDiagonalWeapons")b=true;CMG.setDiagonalWeaponSetting(b)end;local function ab()TriggerEvent("CMG:setVerticalWeapons")b=false;CMG.setDiagonalWeaponSetting(b)end;RageUI.Checkbox("Enable Diagonal Weapons","~g~This changes the way weapons look on your back from vertical to diagonal.",b,{Style=RageUI.CheckboxStyle.Car},function(a6,a8,a7,ac)if a6 then end;if a7 then end;if a8 then end;if ac then end end,aa,ab)RageUI.Checkbox("Enable Front Assault Rifles","~g~This changes the positioning of Assault Rifles from back to front.",c,{Style=RageUI.CheckboxStyle.Car},function()end,function()TriggerEvent("CMG:setFrontAR")c=true;CMG.setFrontARSetting(c)end,function()TriggerEvent("CMG:setBackAR")c=false;CMG.setFrontARSetting(c)end)local function aa()TriggerEvent("CMG:hsSoundsOn")d=true;CMG.setHitMarkerSetting(d)tvRP.notify("~y~Experimental Headshot sounds now set to "..tostring(d))end;local function ab()TriggerEvent("CMG:hsSoundsOff")d=false;CMG.setHitMarkerSetting(d)tvRP.notify("~y~Experimental Headshot sounds now set to "..tostring(d))end;RageUI.Checkbox("Enable Experimental Hit Marker Sounds","~g~This adds 'hit marker' sounds when shooting another player, however it can be unreliable.",d,{Style=RageUI.CheckboxStyle.Car},function(a6,a8,a7,ac)if a6 then end;if a7 then end;if a8 then end;if ac then end end,aa,ab)RageUI.ButtonWithStyle("Weapon Whitelists","Sell your custom weapon whitelists here.",{RightLabel="→→→"},true,function(a6,a7,a8)if a6 then end;if a7 then end;if a8 then x=nil;v=nil;w=nil;y=nil;TriggerServerEvent("CMG:getCustomWeaponsOwned")end end,RMenu:Get("settingsmenu","weaponswhitelist"))RageUI.ButtonWithStyle("Store Inventory","View your store inventory here.",{RightLabel="→→→"},true,function()end,RMenu:Get("store","mainmenu"))RageUI.Checkbox("Streetnames","",CMG.isStreetnamesEnabled(),{Style=RageUI.CheckboxStyle.Car},function(a6,a8,a7,ac)if a6 then end;if a7 then end;if a8 then end;if ac then end end,function()CMG.setStreetnamesEnabled(true)end,function()CMG.setStreetnamesEnabled(false)end)RageUI.Checkbox("Compass","",CMG.isCompassEnabled(),{Style=RageUI.CheckboxStyle.Car},function(a6,a8,a7,ac)if a6 then end;if a7 then end;if a8 then end;if ac then end end,function()CMG.setCompassEnabled(true)end,function()CMG.setCompassEnabled(false)end)local function aa()CMG.hideUI()hideUI=true end;local function ab()CMG.showUI()hideUI=false end;RageUI.Checkbox("Hide UI","",hideUI,{Style=RageUI.CheckboxStyle.Car},function(a6,a8,a7,ac)end,aa,ab)local function aa()CMG.toggleBlackBars()e=true end;local function ab()CMG.toggleBlackBars()e=false end;RageUI.Checkbox("Cinematic Black Bars","",e,{Style=RageUI.CheckboxStyle.Car},function(a6,a8,a7,ac)end,aa,ab)RageUI.Checkbox("Reduce Chat Opacity","",f,{},function()end,function()f=true;CMG.setReducedChatOpacity(true)TriggerEvent("CMG:chatReduceOpacity",true)end,function()f=false;CMG.setReducedChatOpacity(false)TriggerEvent("CMG:chatReduceOpacity",false)end)RageUI.Checkbox("Show Health Percentage","Displays the health and armour percentage on the bars.",h,{},function()end,function()h=true;CMG.setShowHealthPercentageFlag(true)end,function()h=false;CMG.setShowHealthPercentageFlag(false)end)RageUI.Checkbox("Hide Event Announcements","Hides the big messages across your screen. The event will still be shown in chat.",g,{},function()end,function()g=true;CMG.setHideEventAnnouncementFlag(true)end,function()g=false;CMG.setHideEventAnnouncementFlag(false)end)RageUI.ButtonWithStyle("Crosshair","Create a custom built-in crosshair here.",{RightLabel="→→→"},true,function(a6,a7,a8)if a6 then end;if a7 then end;if a8 then ExecuteCommand("crosshair")end end)RageUI.ButtonWithStyle("Scope Settings","Add a toggleable range finder when using sniper scopes.",{RightLabel="→→→"},true,function(a6,a7,a8)if a6 then end;if a7 then end;if a8 then ExecuteCommand("scope")end end)RageUI.ButtonWithStyle("Graphic Presets","View a list of preconfigured graphic settings.",{RightLabel="→→→"},true,function()end,RMenu:Get("settingsmenu","graphicpresets"))RageUI.ButtonWithStyle("Kill Effects","Toggle effects that occur on killing a player.",{RightLabel="→→→"},true,function()end,RMenu:Get("settingsmenu","killeffects"))RageUI.ButtonWithStyle("Blood Effects","Toggle effects that occur when damaging a player.",{RightLabel="→→→"},true,function()end,RMenu:Get("settingsmenu","bloodeffects"))end,function()end)RageUI.IsVisible(RMenu:Get('settingsmenu','weaponswhitelist'),true,true,true,function()for ad,ae in pairs(u)do RageUI.ButtonWithStyle(ae,"",{RightLabel="→→→"},true,function(a6,a7,a8)if a6 then end;if a7 then end;if a8 then v=ae;w=ad;y=nil end end,RMenu:Get("settingsmenu","generateaccesscode"))end;RageUI.Separator("~y~If you do not see your custom weapon here.")RageUI.Separator("~y~Please open a ticket on our support discord.")end,function()end)RageUI.IsVisible(RMenu:Get('settingsmenu','generateaccesscode'),true,true,true,function()RageUI.Separator("~g~Weapon Whitelist for "..v)RageUI.Separator("How it works:")RageUI.Separator("You generate an access code for the player who wishes")RageUI.Separator("to purchase your custom weapon whitelist, which they ")RageUI.Separator("then enter on the store to receive their automated")RageUI.Separator("weapon whitelist.")RageUI.ButtonWithStyle("Create access code","",{RightLabel="→→→"},true,function(a6,a7,a8)if a6 then end;if a7 then end;if a8 then local af=getGenericTextInput("User ID of player purchasing your weapon whitelist.")if tonumber(af)then af=tonumber(af)if af>0 then print("selling",w,"to",af)TriggerServerEvent("CMG:generateWeaponAccessCode",w,af)end end end end)RageUI.ButtonWithStyle("View whitelisted users","",{RightLabel="→→→"},true,function(a6,a7,a8)if a8 then TriggerServerEvent("CMG:requestWhitelistedUsers",w)end end,RMenu:Get("settingsmenu","viewwhitelisted"))if x then RageUI.Separator("~g~Access code generated: "..x)end end,function()end)RageUI.IsVisible(RMenu:Get("settingsmenu","viewwhitelisted"),true,true,true,function()RageUI.Separator("~g~Whitelisted users for "..v)if y==nil then RageUI.Separator("~r~Requesting whitelisted users...")else for ag,ah in pairs(y)do RageUI.ButtonWithStyle("ID: "..tostring(ag),"",{RightLabel=ah},true,function()end)end end end,function()end)RageUI.IsVisible(RMenu:Get("settingsmenu","graphicpresets"),true,true,true,function()for I,E in pairs(a.presets)do RageUI.Separator(E.name)for I,F in pairs(E.presets)do local ai=D(E,F)RageUI.Checkbox(F.name,nil,ai,{},function(a6,a8,a7,ac)if ac~=ai then M(E,F,ac)end end,function()end,function()end)end end end,function()end)RageUI.IsVisible(RMenu:Get("settingsmenu","killeffects"),true,true,true,function()RageUI.Checkbox("Create Lightning","",Y.lightning,{},function(a6,a8,a7,ac)if a8 then Y.lightning=ac;_()end end)RageUI.Checkbox("Ped Flash","",Y.pedFlash,{},function(a6,a8,a7,ac)if a8 then Y.pedFlash=ac;_()end end)if Y.pedFlash then RageUI.List("Ped Flash Red",P,Y.pedFlashRGB[1],"",{},Y.pedFlash,function(a6,a7,a8,a9)if a7 and Y.pedFlashRGB[1]~=a9 then Y.pedFlashRGB[1]=a9;_()end end,function()end)RageUI.List("Ped Flash Green",P,Y.pedFlashRGB[2],"",{},Y.pedFlash,function(a6,a7,a8,a9)if a7 and Y.pedFlashRGB[2]~=a9 then Y.pedFlashRGB[2]=a9;_()end end,function()end)RageUI.List("Ped Flash Blue",P,Y.pedFlashRGB[3],"",{},Y.pedFlash,function(a6,a7,a8,a9)if a7 and Y.pedFlashRGB[3]~=a9 then Y.pedFlashRGB[3]=a9;_()end end,function()end)RageUI.List("Ped Flash Intensity",R,Y.pedFlashIntensity,"",{},Y.pedFlash,function(a6,a7,a8,a9)if a7 and Y.pedFlashIntensity~=a9 then Y.pedFlashIntensity=a9;_()end end,function()end)RageUI.List("Ped Flash Time",T,Y.pedFlashTime,"",{},Y.pedFlash,function(a6,a7,a8,a9)if a7 and Y.pedFlashTime~=a9 then Y.pedFlashTime=a9;_()end end,function()end)end;RageUI.Checkbox("Screen Flash","",Y.screenFlash,{},function(a6,a8,a7,ac)if a8 then Y.screenFlash=ac;_()end end)if Y.screenFlash then RageUI.List("Screen Flash Red",P,Y.screenFlashRGB[1],"",{},Y.screenFlash,function(a6,a7,a8,a9)if a7 and Y.screenFlashRGB[1]~=a9 then Y.screenFlashRGB[1]=a9;_()end end,function()end)RageUI.List("Screen Flash Green",P,Y.screenFlashRGB[2],"",{},Y.screenFlash,function(a6,a7,a8,a9)if a7 and Y.screenFlashRGB[2]~=a9 then Y.screenFlashRGB[2]=a9;_()end end,function()end)RageUI.List("Screen Flash Blue",P,Y.screenFlashRGB[3],"",{},Y.screenFlash,function(a6,a7,a8,a9)if a7 and Y.screenFlashRGB[3]~=a9 then Y.screenFlashRGB[3]=a9;_()end end,function()end)RageUI.List("Screen Flash Intensity",R,Y.screenFlashIntensity,"",{},Y.screenFlash,function(a6,a7,a8,a9)if a7 and Y.screenFlashIntensity~=a9 then Y.screenFlashIntensity=a9;_()end end,function()end)RageUI.List("Screen Flash Time",T,Y.screenFlashTime,"",{},Y.screenFlash,function(a6,a7,a8,a9)if a7 and Y.screenFlashTime~=a9 then Y.screenFlashTime=a9;_()end end,function()end)end;RageUI.List("Timecycle Flash",X,Y.timecycle,"",{},true,function(a6,a7,a8,a9)if a7 and Y.timecycle~=a9 then Y.timecycle=a9;_()end end,function()end)if Y.timecycle~=1 then RageUI.List("Timecycle Flash Time",T,Y.timecycleTime,"",{},true,function(a6,a7,a8,a9)if a7 and Y.timecycleTime~=a9 then Y.timecycleTime=a9;_()end end,function()end)end;RageUI.List("~y~Particles~w~",V,Y.particle,"",{},true,function(a6,a7,a8,a9)if a7 and Y.particle~=a9 then if not CMG.isPlatClub()then notify("~y~You need to be a subscriber of CMG Plus or CMG Platinum to use this feature.")notify("~y~Available @ store.cmgstudios.net")end;Y.particle=a9;_()end end,function()end)local aj=0;if Y.lightning then aj=math.max(aj,1000)end;if Y.pedFlash then aj=math.max(aj,U[Y.pedFlashTime])end;if Y.screenFlash then aj=math.max(aj,U[Y.screenFlashTime])end;if Y.timecycleTime~=1 then aj=math.max(aj,Q[Y.timecycleTime])end;if Y.particle~=1 then aj=math.max(aj,1000)end;if GetGameTimer()-Z>aj+1000 then CMG.addKillEffect(PlayerPedId(),true)Z=GetGameTimer()end;DrawAdvancedTextNoOutline(0.59,0.9,0.005,0.0028,1.5,"PREVIEW",255,0,0,255,2,0)end,function()end)RageUI.IsVisible(RMenu:Get("settingsmenu","bloodeffects"),true,true,true,function()RageUI.List("~y~Head",V,a1.head,"Effect that displays when you hit the head.",{},true,function(a6,a7,a8,a9)if a1.head~=a9 then if not CMG.isPlusClub()and not CMG.isPlatClub()then notify("~y~You need to be a subscriber of CMG Plus or CMG Platinum to use this feature.")notify("~y~Available @ store.cmgstudios.net")end;a1.head=a9;a2()end;if a8 then CMG.addBloodEffect("head",0x796E,PlayerPedId())end end)RageUI.List("~y~Body",V,a1.body,"Effect that displays when you hit the body.",{},true,function(a6,a7,a8,a9)if a1.body~=a9 then if not CMG.isPlusClub()and not CMG.isPlatClub()then notify("~y~You need to be a subscriber of CMG Plus or CMG Platinum to use this feature.")notify("~y~Available @ store.cmgstudios.net")end;a1.body=a9;a2()end;if a8 then CMG.addBloodEffect("body",0x0,PlayerPedId())end end)RageUI.List("~y~Arms",V,a1.arms,"Effect that displays when you hit the arms.",{},true,function(a6,a7,a8,a9)if a1.arms~=a9 then if not CMG.isPlusClub()and not CMG.isPlatClub()then notify("~y~You need to be a subscriber of CMG Plus or CMG Platinum to use this feature.")notify("~y~Available @ store.cmgstudios.net")end;a1.arms=a9;a2()end;if a8 then CMG.addBloodEffect("arms",0xBB0,PlayerPedId())CMG.addBloodEffect("arms",0x58B7,PlayerPedId())end end)RageUI.List("~y~Legs",V,a1.legs,"Effect that displays when you hit the legs.",{},true,function(a6,a7,a8,a9)if a1.legs~=a9 then if not CMG.isPlusClub()and not CMG.isPlatClub()then notify("~y~You need to be a subscriber of CMG Plus or CMG Platinum to use this feature.")notify("~y~Available @ store.cmgstudios.net")end;a1.legs=a9;a2()end;if a8 then CMG.addBloodEffect("legs",0x3FCF,PlayerPedId())CMG.addBloodEffect("legs",0xB3FE,PlayerPedId())end end)end,function()end)end)local ak=false;RegisterCommand("settings",function()if CMG.getStaffLevel()>0 then RageUI.Visible(RMenu:Get('cmgadminmenu','mainmenu'),not RageUI.Visible(RMenu:Get('cmgadminmenu','mainmenu')))else ak=not ak;q(ak)end end,false)RegisterKeyMapping("settings","Open Settings","KEYBOARD","F2")Citizen.CreateThread(function()while true do OverrideLodscaleThisFrame(r[t][2])Wait(0)end end)AddEventHandler("CMG:enteredCity",function()end)AddEventHandler("CMG:leftCity",function()end)local function al(am)local an=GetEntityCoords(am,true)local ao=GetGameTimer()local ap=math.floor(Q[Y.pedFlashRGB[1]]*255)local aq=math.floor(Q[Y.pedFlashRGB[2]]*255)local ar=math.floor(Q[Y.pedFlashRGB[3]]*255)local as=S[Y.pedFlashIntensity]local at=U[Y.pedFlashTime]while GetGameTimer()-ao<at do local au=(at-(GetGameTimer()-ao))/at;local av=as*25.0*au;DrawLightWithRange(an.x,an.y,an.z+1.0,ap,aq,ar,50.0,av)Citizen.Wait(0)end end;local function aw()local ao=GetGameTimer()local ap=math.floor(Q[Y.screenFlashRGB[1]]*255)local aq=math.floor(Q[Y.screenFlashRGB[2]]*255)local ar=math.floor(Q[Y.screenFlashRGB[3]]*255)local as=S[Y.screenFlashIntensity]local at=U[Y.screenFlashTime]while GetGameTimer()-ao<at do local au=(at-(GetGameTimer()-ao))/at;local av=math.floor(25.5*as*au)DrawRect(0.0,0.0,2.0,2.0,ap,aq,ar,av)Citizen.Wait(0)end end;local function ax(am)local an=GetEntityCoords(am,true)local ay=W[Y.particle]CMG.loadPtfx(ay[1])UseParticleFxAsset(ay[1])StartParticleFxNonLoopedAtCoord(ay[2],an.x,an.y,an.z,0.0,0.0,0.0,ay[3],false,false,false)RemoveNamedPtfxAsset(ay[1])end;local function az()local ao=GetGameTimer()local at=U[Y.timecycleTime]SetTimecycleModifier(X[Y.timecycle])while GetGameTimer()-ao<at do local au=(at-(GetGameTimer()-ao))/at;SetTimecycleModifierStrength(1.0*au)Citizen.Wait(0)end;ClearTimecycleModifier()end;function CMG.addKillEffect(aA,aB)if Y.lightning then ForceLightningFlash()end;if Y.pedFlash then Citizen.CreateThreadNow(function()al(aA)end)end;if Y.screenFlash then Citizen.CreateThreadNow(function()aw()end)end;if Y.particle~=1 and(CMG.isPlatClub()or aB)then Citizen.CreateThreadNow(function()ax(aA)end)end;if Y.timecycle~=1 then Citizen.CreateThreadNow(function()az()end)end end;function CMG.addBloodEffect(aC,aD,am)local aE=a1[aC]if aE>1 then local ay=W[aE]CMG.loadPtfx(ay[1])UseParticleFxAsset(ay[1])StartParticleFxNonLoopedOnPedBone(ay[2],am,0.0,0.0,0.0,0.0,0.0,0.0,aD,ay[3],false,false,false)RemoveNamedPtfxAsset(ay[1])end end;AddEventHandler("CMG:onPlayerKilledPed",function(aF)CMG.addKillEffect(aF,false)end)local aG={[0x0]="body",[0x2E28]="body",[0xE39F]="legs",[0xF9BB]="legs",[0x3779]="legs",[0x83C]="legs",[0xCA72]="legs",[0x9000]="legs",[0xCC4D]="legs",[0x512D]="legs",[0xE0FD]="body",[0x5C01]="body",[0x60F0]="body",[0x60F1]="body",[0x60F2]="body",[0xFCD9]="body",[0xB1C5]="arms",[0xEEEB]="arms",[0x49D9]="arms",[0x67F2]="arms",[0xFF9]="arms",[0xFFA]="arms",[0x67F3]="arms",[0x1049]="arms",[0x104A]="arms",[0x67F4]="arms",[0x1059]="arms",[0x105A]="arms",[0x67F5]="arms",[0x1029]="arms",[0x102A]="arms",[0x67F6]="arms",[0x1039]="arms",[0x103A]="arms",[0x29D2]="arms",[0x9D4D]="arms",[0x6E5C]="arms",[0xDEAD]="arms",[0xE5F2]="arms",[0xFA10]="arms",[0xFA11]="arms",[0xE5F3]="arms",[0xFA60]="arms",[0xFA61]="arms",[0xE5F4]="arms",[0xFA70]="arms",[0xFA71]="arms",[0xE5F5]="arms",[0xFA40]="arms",[0xFA41]="arms",[0xE5F6]="arms",[0xFA50]="arms",[0xFA51]="arms",[0x9995]="head",[0x796E]="head",[0x5FD4]="head",[0xD003]="body",[0x45FC]="body",[0x1D6B]="legs",[0xB23F]="legs"}AddEventHandler("CMG:onPlayerDamagePed",function(aF)if not CMG.isPlusClub()and not CMG.isPlatClub()then return end;local aH,aD=GetPedLastDamageBone(aF,0)if aH then local aI=GetPedBoneIndex(aF,aD)local aJ=GetWorldPositionOfEntityBone(aF,aI)local aK=aG[aD]if not aK then local aL=GetWorldPositionOfEntityBone(aF,GetPedBoneIndex(aF,0x9995))local aM=GetWorldPositionOfEntityBone(aF,GetPedBoneIndex(aF,0x2E28))if aJ.z>=aL.z-0.01 then aK="head"elseif aJ.z<aM.z then aK="legs"else local aN=GetEntityCoords(aF,true)local aO=#(aN.xy-aJ.xy)if aO>0.075 then aK="arms"else aK="body"end end end;CMG.addBloodEffect(aK,aD,aF)end end)