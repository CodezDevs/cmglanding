local a={}local b={}RegisterNetEvent("CMG:syncJobLevels",function(c,d)a=c;for e,f in pairs(a)do local g;local h;if d[e]==nil then g=0;h=0 else g=d[e].xp;h=d[e].level end;b[e]={type=e,xp=g,level=h,name=f.name}end end)RegisterNetEvent("CMG:notifyPlayerOnLevelStatus",function(e,i,j)AddPlayerXP(e,i,j)end)function AddPlayerXP(e,k,j)if e then Citizen.Wait(2500)local l=b[e].level;local m=b[e].xp;local n=m+k;local o=n;local p=0;for q=1,#a[e].xp_table,1 do if q>l and n>=a[e].xp_table[q]then while n>=a[e].xp_table[q]do n=n-a[e].xp_table[q]p=p+1;q=q+1;Citizen.Wait(0)end;break end end;if p>0 then if j then CreateRankBar(0,a[e].xp_table[l+1],m,o,0,b[e].name)else CreateRankBar(0,a[e].xp_table[l+1],m,o,l,b[e].name)end;b[e].xp=n;b[e].level=b[e].level+p else if j then CreateRankBar(0,a[e].xp_table[l+1],m,o,0,b[e].name)else CreateRankBar(0,a[e].xp_table[l+1],m,o,l,b[e].name)end;b[e].xp=o end end end;function CreateRankBar(r,s,t,u,v,w)local x=116;if not HasScaleformScriptHudMovieLoaded(19)then RequestScaleformScriptHudMovie(19)while not HasScaleformScriptHudMovieLoaded(19)do Wait(0)end end;local y=true;Citizen.CreateThread(function()while y do DrawAdvancedText(0.5,0.038,0.1,0.05,0.5,w,255,255,255,255,4,0)Wait(0)end end)BeginScaleformScriptHudMovieMethod(19,"SET_COLOUR")ScaleformMovieMethodAddParamInt(x)EndScaleformMovieMethodReturnValue()BeginScaleformScriptHudMovieMethod(19,"SET_RANK_SCORES")ScaleformMovieMethodAddParamInt(r)ScaleformMovieMethodAddParamInt(s)ScaleformMovieMethodAddParamInt(t)ScaleformMovieMethodAddParamInt(u)ScaleformMovieMethodAddParamInt(v)ScaleformMovieMethodAddParamInt(100)EndScaleformMovieMethodReturnValue()Citizen.Wait(5000)y=false end