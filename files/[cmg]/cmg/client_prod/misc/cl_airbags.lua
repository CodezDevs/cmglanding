local a={}local b=630.0;local c=`prop_car_airbag`Citizen.CreateThread(function()while true do local d=CMG.getPlayerVehicle()if d~=0 and GetPedInVehicleSeat(d,-1)==CMG.getPlayerPed()and not CMG.inEvent()then local e=GetVehicleEngineHealth(d)if e<=b and a[d]==nil then local f=GetVehicleClass(d)if f~=8 and f~=16 and f~=15 and f~=13 then TriggerServerEvent("CMG:playNuiSound","airbag",15.0,soundEventCode)createAirbags(d)end end end;for g,h in pairs(a)do if not DoesEntityExist(h[1])then if DoesEntityExist(h[2])then DeleteEntity(h[2])end;if DoesEntityExist(h[3])then DeleteEntity(h[3])end;a[g]=nil end end;Wait(1000)end end)function createAirbags(d)a[d]={d}local i=GetEntityBoneIndexByName(d,"seat_dside_f")local j=GetEntityBoneIndexByName(d,"seat_pside_f")CMG.loadModel(c)local k=CMG.getPlayerCoords()local l=CreateObject(c,k.x,k.y,k.z,false,false,false)local m=CreateObject(c,k.x,k.y,k.z,false,false,false)a[d][2]=l;a[d][3]=m;while not DoesEntityExist(l)or not DoesEntityExist(m)do Wait(0)end;SetModelAsNoLongerNeeded(c)AttachEntityToEntity(l,d,i,0.0,0.30,0.40,90.0,0.0,0.0,true,true,false,false,2,true)AttachEntityToEntity(m,d,j,0.0,0.40,0.40,90.0,0.0,0.0,true,true,false,false,2,true)SetTimeout(10000,function()if DoesEntityExist(l)then DeleteEntity(l)end;if DoesEntityExist(m)then DeleteEntity(m)end end)end