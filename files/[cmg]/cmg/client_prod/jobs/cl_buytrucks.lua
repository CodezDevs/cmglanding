RMenu.Add('cmgtruckmenu','buy-rent',RageUI.CreateMenu("CMG Trucking","~b~CMG Trucking",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight()))RMenu.Add('cmgtruckmenu','vehicle',RageUI.CreateSubMenu(RMenu:Get("cmgtruckmenu","buy-rent"),"CMG Trucking","~b~CMG Trucking",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight()))RMenu.Add('cmgtruckmenu','vehicles',RageUI.CreateMenu("Your Trucks","~b~CMG Trucking",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight()))RMenu.Add('cmgtruckmenu','rented_trucks',RageUI.CreateSubMenu(RMenu:Get("cmgtruckmenu","vehicles"),"Rented Vehicles","~b~CMG Trucking",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight()))RMenu.Add('cmgtruckmenu','owned_trucks',RageUI.CreateSubMenu(RMenu:Get("cmgtruckmenu","vehicles"),"Owned Vehicles","~b~CMG Trucking",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight()))local a=module("cfg/cfg_trucking")local b=a.trucks;local c={}local d={}local e;local f=""local g;local h;local i=false;local j=false;local k=10.0;globalOnTruckJob=false;RageUI.CreateWhile(1.0,RMenu:Get('cmgtruckmenu','buy-rent'),nil,function()RageUI.IsVisible(RMenu:Get('cmgtruckmenu','buy-rent'),true,false,true,function()for l,m in pairs(b)do if not m.custom then local n;if table.has(d["rented"],GetHashKey(l))then n={RightBadge=RageUI.BadgeStyle.Tick}else n={RightLabel='Â£'..getMoneyStringFormatted(m.price)}end;RageUI.ButtonWithStyle(m.name,"Press to spawn.",n,true,function(o,p,q)if q then if not table.has(d["rented"],GetHashKey(l))then tryRental(l,m.price)else trySpawnVehicle(l)end end end)end end end)end)RegisterNetEvent("CMG:updateOwnedTrucks",function(b,r)d["owned"]=b;d["rented"]=r end)RegisterNetEvent("CMG:setTruckerOnDuty",function(s)globalOnTruckJob=s end)function tryRental(t,u)TriggerServerEvent("CMG:rentTruck",t,u)end;function getVehicleName(v)for l,m in pairs(b)do if GetHashKey(l)==v then return l end end;return nil end;Citizen.CreateThread(function()for w=1,#a.buylocations do local x=a.buylocations[w]local y=x.main;CMG.add3DTextForCoord("Truck Rental",y.x,y.y,y.z,8.0)tvRP.addMarker(y.x,y.y,y.z,0.7,0.7,0.5,0,255,125,125,50,29,true,true)tvRP.addBlip(y.x,y.y,y.z,67,5,"Truck Rental")end end)AddEventHandler("CMG:onClientSpawn",function(z,A)if A then local B=function(C)if not IsPedInAnyVehicle(ped,false)and GetVehiclePedIsIn(ped,false)~=e then i=true;RageUI.CloseAll()RageUI.Visible(RMenu:Get("cmgtruckmenu","buy-rent"),true)end end;local D=function()i=false;RageUI.CloseAll()end;local E=function()end;for w=1,#a.buylocations do local x=a.buylocations[w]local y=x.main;CMG.createArea("trucking_buy_"..w,x.main,1.15,6,B,D,E,{})end end end)function trySpawnVehicle(F)TriggerServerEvent("CMG:spawnTruck",F)end;RegisterNetEvent("CMG:spawnTruckCl",function(F)local ped=PlayerPedId()local y=GetEntityCoords(ped)local G=CMG.spawnVehicle(F,y.x,y.y,y.z,GetEntityHeading(ped),true,true,true)end)function getAllTrucks()TriggerServerEvent("CMG:truckerJobBuyAllTrucks")end