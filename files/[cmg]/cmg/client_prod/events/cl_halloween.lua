local a={}RegisterNetEvent("CMG:addZombie",function(b)for c,d in pairs(b)do a[c]=vector3(d.x,d.y,d.z)end end)RegisterNetEvent("CMG:removeZombie",function(c)a[c]=nil end)function dumpzombies()print(dump(a))end;local function e()CMG.loadPtfx("scr_rcbarry2")UseParticleFxAsset("scr_rcbarry2")UseParticleFxAsset("scr_rcbarry2")local f=StartNetworkedParticleFxNonLoopedAtCoord("scr_clown_appears",CMG.getPlayerCoords(),0.0,0.0,0.0,1.0,false,false,false,false)RemoveNamedPtfxAsset("scr_rcbarry2")end;RegisterNetEvent("CMG:eatZombieMeat",function()local g=tvRP.getCustomization()PlaySoundFrontend(-1,"Survival_Failed","DLC_VW_AS_Sounds",true)tvRP.setCustomization({modelhash=`u_m_y_zombie_01`})e()SetTimecycleModifier("BeastIntro01")SetTimecycleModifierStrength(0.5)PrepareMusicEvent("HALLOWEEN_START_MUSIC")TriggerMusicEvent("HALLOWEEN_START_MUSIC")RequestAnimSet("anim_group_move_ballistic")while not HasAnimSetLoaded("anim_group_move_ballistic")do Wait(0)end;SetPedMovementClipset(PlayerPedId(),"anim_group_move_ballistic",0)RemoveAnimSet("anim_group_move_ballistic")ApplyPedDamagePack(PlayerPedId(),"BigHitByVehicle",0.0,9.0)ApplyPedDamagePack(PlayerPedId(),"SCR_Dumpster",0.0,9.0)ApplyPedDamagePack(PlayerPedId(),"SCR_Torture",0.0,9.0)Wait(60000)TriggerMusicEvent("BST_STOP")ClearTimecycleModifier()tvRP.setCustomization(g)end)Citizen.CreateThread(function()while true do for c,h in pairs(a)do local i=CMG.getPlayerCoords()local j=#(i-h)if c~=0 and NetworkDoesNetworkIdExist(c)and j<100 then local k=CMG.getObjectId(c,"zombie")if DoesEntityExist(k)then if not IsEntityPlayingAnim(k,"special_ped@zombie@base","base",3)then CMG.loadAnimDict("special_ped@zombie@base")TaskPlayAnim(k,"special_ped@zombie@base","base",8.0,8.0,-1,1,1.0)RemoveAnimDict("special_ped@zombie@base")end;SetBlockingOfNonTemporaryEvents(k,true)end end;if j<1.5 then globalIgnoreDeathSound=true;zombieScream()SetEntityHealth(PlayerPedId(),0)TriggerServerEvent("CMG:zombieDead",c)Wait(100)DoScreenFadeIn(6000)Wait(6000)globalIgnoreDeathSound=false end end;Wait(250)end end)local l={}Citizen.CreateThread(function()while true do local i=CMG.getPlayerCoords()for c,h in pairs(a)do local j=#(i-h)if NetworkDoesNetworkIdExist(c)then local k=CMG.getObjectId(c,"zombie nearby")if j<30 and not l[k]then zombieNearby(k)l[k]=true end end end;Wait(250)end end)function zombieNearby(k)if DoesEntityExist(k)then while not RequestScriptAudioBank("DLC_HALLOWEEN\\HALLOWEEN")do Citizen.Wait(0)print("infinite loading of halloween sound?")end;local m=GetSoundId()PlaySoundFromEntity(m,"zombie",k,"dlc_halloween_soundset",0,0)end end;function zombieScream()DoScreenFadeOut(100)SendNUIMessage({transactionType="zombiescream"})end