RegisterNUICallback("exit",function(a)SetDisplay(false)stopAnim()end)RegisterNUICallback("personsearch",function(a)TriggerServerEvent("CMG:searchPerson",a.firstname,a.lastname)end)RegisterNUICallback("platesearch",function(a)TriggerServerEvent("CMG:searchPlate",a.plate)end)RegisterNUICallback("submitfine",function(a)TriggerServerEvent("CMG:finePlayer",a.user_id,a.charges,a.amount,a.notes)end)RegisterNUICallback("addnote",function(a)TriggerServerEvent("CMG:addNote",a.user_id,a.note)end)RegisterNUICallback("removenote",function(a)TriggerServerEvent("CMG:removeNote",a.user_id,a.note)end)RegisterNUICallback("addattentiondrawn",function(a)TriggerServerEvent("CMG:addAttentionDrawn",a)end)RegisterNUICallback("removeattentiondrawn",function(a)TriggerServerEvent("CMG:removeAttentionDrawn",a.ad)end)RegisterNUICallback("savenotes",function(a)TriggerServerEvent("CMG:updateVehicleNotes",a.notes,a.user_id,a.vehicle)end)RegisterNUICallback("savepersonnotes",function(a)TriggerServerEvent("CMG:updatePersonNote",a.user_id,a.notes)end)RegisterNUICallback("generatewarrant",function(a)TriggerServerEvent("CMG:getWarrant")end)RegisterNUICallback("addpoint",function(a)TriggerServerEvent("CMG:addPoints",a.points,a.id)end)RegisterNUICallback("addmarker",function(a,b)TriggerServerEvent("CMG:addWarningMarker",tonumber(a.id),a.type,a.reason)b()end)RegisterNUICallback("wipeallmarkers",function(a,b)TriggerServerEvent("CMG:wipeAllMarkers",a.code)b()end)RegisterNetEvent("CMG:sendSearcheduser",function(c)SendNUIMessage({type="addPersons",user=c})end)RegisterNetEvent("CMG:sendSearchedvehicle",function(d)SendNUIMessage({type="displaySearchedVehicle",vehicle=d})end)RegisterNetEvent("CMG:addADToClient",function(e)SendNUIMessage({type="updateAttentionDrawn",ad=e})end)RegisterNetEvent("CMG:verifyFineSent",function(f,g)SendNUIMessage({type="verifyFine",sentornah=f,msg=g})end)RegisterNetEvent("CMG:novehFound",function(g)SendNUIMessage({type="noveh",message=g or"No vehicles found!"})end)local h=false;RegisterNetEvent("CMG:openPNC",function(i,j,e)if h then SendNUIMessage({type="closePNC"})h=false else SetNuiFocus(true,true)SetNuiFocusKeepInput(true)SendNUIMessage({type="ui",status=true,id=CMG.getUserId(),name=CMG.getPlayerName(PlayerId()),gc=i,news=j,ad=e})startAnim()h=true end end)RegisterNetEvent("CMG:updateAttentionDrawn",function(k)SendNUIMessage({type="updateAttentionDrawn",ad=k})end)RegisterNetEvent("CMG:setNameFields",function(l,m)SendNUIMessage({type="setNameFields",lname=l,fname=m})end)RegisterNetEvent("CMG:noPersonsFound",function()SendNUIMessage({type="NoPersonsFound"})end)CreateThread(function()while true do if h then DisableAllControlActions(0)EnableControlAction(0,168,true)EnableControlAction(0,249,true)end;if IsControlJustPressed(0,168)or IsDisabledControlJustReleased(0,200)and h then TriggerServerEvent("CMG:checkForPolicewhitelist")end;Citizen.Wait(0)end end)function startAnim()CreateThread(function()RequestAnimDict("amb@world_human_seat_wall_tablet@female@base")while not HasAnimDictLoaded("amb@world_human_seat_wall_tablet@female@base")do Citizen.Wait(0)end;attachObject()TaskPlayAnim(CMG.getPlayerPed(),"amb@world_human_seat_wall_tablet@female@base","base",8.0,-8.0,-1,50,0,false,false,false)RemoveAnimDict("amb@world_human_seat_wall_tablet@female@base")end)end;function attachObject()local n=CreateObject(`prop_cs_tablet`,0,0,0,true,true,true)AttachEntityToEntity(n,CMG.getPlayerPed(),GetPedBoneIndex(CMG.getPlayerPed(),57005),0.17,0.10,-0.13,24.0,180.0,180.0,true,true,false,true,1,true)tab=n;Citizen.CreateThread(function()while true do if not IsEntityPlayingAnim(PlayerPedId(),"amb@world_human_seat_wall_tablet@female@base","base",3)then DeleteEntity(n)return end;Citizen.Wait(0)end end)end;function stopAnim()StopAnimTask(CMG.getPlayerPed(),"amb@world_human_seat_wall_tablet@female@base","base",8.0)DeleteEntity(tab)end;function SetDisplay(f)SetNuiFocus(f,f)SetNuiFocusKeepInput(false)SendNUIMessage({type="ui",status=f,name=CMG.getPlayerName(PlayerId())})end;function PayCopSalary(o)TriggerServerEvent("CMG:payPoliceMoney",o)end;function PoliceSeizeTrunk(p,q)TriggerServerEvent("CMG:policeClearVehicleTrunk",p,q)end;RegisterNetEvent("CMG:notifyAD",function(g,r)CMG.notifyPicture("met_logo","met_logo1",g,"Met Control",r,"police",2)end)