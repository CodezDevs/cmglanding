local a={{entryPosition=vector3(1109.76,227.89,-49.64)}}local b;local c;local d=false;RMenu.Add('luckywheel','casino',RageUI.CreateMenu("","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"casinoui_lucky_wheel","casinoui_lucky_wheel"))RMenu:Get('luckywheel','casino'):SetSubtitle("~b~You may only spin the wheel once per restart.")RegisterNetEvent("CMG:frameworkCleanup",function()DeleteEntity(b)end)RageUI.CreateWhile(1.0,RMenu:Get('luckywheel','casino'),nil,function()RageUI.IsVisible(RMenu:Get('luckywheel','casino'),true,true,true,function()RageUI.ButtonWithStyle("Spin the wheel of CMG (50,000 Chips)","",{RightLabel="→→→"},true,function(e,f,g)if e then end;if f then end;if g then TriggerServerEvent("CMG:requestSpinLuckyWheel")end end)end,function()end)end)function showCasinoLuckyWheelUI(h)RageUI.CloseAll()RageUI.Visible(RMenu:Get('luckywheel','casino'),h)end;Citizen.CreateThread(function()while not insideDiamondCasino do Wait(1000)end;local i=CMG.loadModel(`vw_prop_vw_luckywheel_02a`)local j=CMG.loadModel(`casgt86`)b=CreateObject(i,1111.05,229.81,-50.38,false,false,true)SetEntityHeading(b,0.0)SetModelAsNoLongerNeeded(i)local k=CreateVehicle(j,1100.39,220.09,-51.25,0.0,false,false)DecorSetInt(k,"CMGACVeh",955)SetModelAsNoLongerNeeded(j)FreezeEntityPosition(k,true)local l=GetEntityCoords(k)SetEntityCoords(k,l.x,l.y,l.z+1,false,false,true,true)SetVehicleOnGroundProperly(k)c=k end)Citizen.CreateThread(function()while not insideDiamondCasino do Wait(1000)end;while true do if insideDiamondCasino then if c~=nil then local m=GetEntityHeading(c)local n=m-0.1;SetEntityHeading(c,n)end end;Citizen.Wait(5)end end)function actuallyRollWheel(o)SetEntityHeading(b,-30.9754)Citizen.CreateThread(function()local p=1;local q;local r=(o-1)*18;local s=r+360*8;local t=s/2;local u=0;local v=-20;while p>0 do local w=GetEntityRotation(b,1)if s>t then p=p+1 else p=p-1;if p<0 then p=0 end end;u=u+1;q=p/200;local x=w.y-q;if x-v<5 and x-v>-5 then local y=GetSoundId()PlaySoundFromCoord(y,"Spin_Single_Ticks",1109.76,227.89,-49.64,"dlc_vw_casino_lucky_wheel_sounds",0,0,0)SetTimeout(100,function()ReleaseSoundId(y)end)v=v-20;if v==-180 then v=180 end else if v==180 then angleCounter2=-180;if x-angleCounter2<5 and x-angleCounter2>-5 then local y=GetSoundId()PlaySoundFromCoord(y,"Spin_Single_Ticks",1109.76,227.89,-49.64,"dlc_vw_casino_lucky_wheel_sounds",0,0,0)SetTimeout(100,function()ReleaseSoundId(y)end)end;v=v-20 end end;s=s-q;SetEntityHeading(b,-30.9754)SetEntityRotation(b,0.0,x,0.0,2,true)Citizen.Wait(5)end;local y=GetSoundId()PlaySoundFromCoord(y,"Win",1109.76,227.89,-49.64,"dlc_vw_casino_lucky_wheel_sounds",0,0,0)SetTimeout(1000,function()ReleaseSoundId(y)end)d=false end)end;function goToWheel()if not d then d=true;local z=CMG.getPlayerPed()local A='anim_casino_a@amb@casino@games@lucky7wheel@female'if IsPedMale(z)then A='anim_casino_a@amb@casino@games@lucky7wheel@male'end;local B,C=A,'enter_right_to_baseidle'RequestAnimDict(B)Wait(50)local D=vector3(1109.55,228.88,-49.64)TaskGoStraightToCoord(z,D.x,D.y,D.z,1.0,-1,312.2,0.0)local E=false;while not E do local F=GetEntityCoords(CMG.getPlayerPed())if F.x>=D.x-0.01 and F.x<=D.x+0.01 and F.y>=D.y-0.01 and F.y<=D.y+0.01 then E=true end;Citizen.Wait(0)end;TaskPlayAnim(z,B,C,8.0,-8.0,-1,0,0,false,false,false)while IsEntityPlayingAnim(z,B,C,3)do Citizen.Wait(0)DisableAllControlActions(0)end;TaskPlayAnim(z,B,'enter_to_armraisedidle',8.0,-8.0,-1,0,0,false,false,false)while IsEntityPlayingAnim(z,B,'enter_to_armraisedidle',3)do Citizen.Wait(0)DisableAllControlActions(0)end;TaskPlayAnim(z,B,'armraisedidle_to_spinningidle_high',8.0,-8.0,-1,0,0,false,false,false)SetEntityHeading(CMG.getPlayerPed(),10.9754)Wait(2000)TaskPlayAnim(z,B,'baseidle_variation_02',8.0,-8.0,-1,1,0,false,false,false)RemoveAnimDict(B)end end;AddEventHandler("CMG:onClientSpawn",function(G,H)if H then local I=function(J)showCasinoLuckyWheelUI(true)end;local K=function(J)showCasinoLuckyWheelUI(false)end;local L=function(J)end;local M=function(J)end;for N,O in pairs(a)do tvRP.addBlip(O.entryPosition.x,O.entryPosition.y,O.entryPosition.z,681,0,"CMG Wheel",0.7,true)CMG.createArea("cmgwheel_"..N,O.entryPosition,1.5,6,I,K,L,{})end end end)RegisterNetEvent("CMG:syncLuckyWheel",function(P)Wait(1000)actuallyRollWheel(P)end)RegisterNetEvent("CMG:spinLuckyWheel",function()goToWheel()end)RegisterNetEvent("CMG:spinLuckyWheelReaction",function(Q)local z=CMG.getPlayerPed()local B='anim_casino_a@amb@casino@games@lucky7wheel@female'if IsPedMale(z)then B='anim_casino_a@amb@casino@games@lucky7wheel@male'end;TaskPlayAnim(z,B,"win"..Q,8.0,-8.0,-1,0,0,false,false,false)end)