local a=module("cfg/cfg_licenses")local b=a.licenses;local c=a.shopCoords;local d;local e=false;local f={}Citizen.CreateThread(function()tvRP.addMarker(c.x,c.y,c.z-1,1.0,1.0,1.0,255,0,0,170,50,27)tvRP.addBlip(c.x,c.y,c.z,525,2,"License Shop")end)Citizen.CreateThread(function()while true do local g=GetEntityCoords(CMG.getPlayerPed(),false)local h=#(g-c)if h<1.5 then e=true else if e then e=false;RageUI.Visible(RMenu:Get("main","licenses"),false)end end;Wait(100)end end)Citizen.CreateThread(function()while true do if e then if IsControlJustPressed(1,38)then RageUI.CloseAll()RageUI.Visible(RMenu:Get("main","licenses"),not RageUI.Visible(RMenu:Get("main","licenses")))TriggerServerEvent("CMG:getCfgOwnedLicenses")end;CMG.DrawText3D(c,"Press [E] to open Licenses Shop",0.2)end;Wait(0)end end)RMenu.Add("main","licenses",RageUI.CreateMenu("","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"cmg_licenseui","cmg_licenseui"))RMenu:Get("main","licenses"):SetSubtitle("~b~Purchase a License.")RMenu.Add("confirm","licenses",RageUI.CreateMenu("","",CMG.getRageUIMenuWidth(),CMG.getRageUIMenuHeight(),"cmg_licenseui","cmg_licenseui"))RMenu:Get("confirm","licenses"):SetSubtitle("~b~Are you sure?")RageUI.CreateWhile(1.0,RMenu:Get('main','licenses'),nil,function()RageUI.IsVisible(RMenu:Get("main","licenses"),true,true,true,function()for i,j in pairs(b)do local k,l,m,n=table.unpack(j)m=getMoneyStringFormatted(tostring(m))local o=not f[l]RageUI.ButtonWithStyle(l.." (£"..m..")",o and n or"You already own this license.",o and{RightLabel="→→→"}or{},o,function(p,q,r)if p then end;if q then end;if r then d=k end end,RMenu:Get("confirm","licenses"))end end,function()end)RageUI.IsVisible(RMenu:Get("confirm","licenses"),true,true,true,function()RageUI.ButtonWithStyle("Yes","",{RightLabel="→→→"},true,function(p,q,r)if p then end;if q then end;if r then TriggerServerEvent("CMG:purchaseLicense",d)TriggerServerEvent("CMG:getCfgOwnedLicenses")end end,RMenu:Get("main","licenses"))RageUI.ButtonWithStyle("No","",{RightLabel="→→→"},true,function(p,q,r)if p then end;if q then end;if r then tvRP.notify("~r~Cancelled.")end end,RMenu:Get("main","licenses"))end,function()end)end)RegisterNetEvent("CMG:getCfgOwnedLicenses",function(s)f=s end)