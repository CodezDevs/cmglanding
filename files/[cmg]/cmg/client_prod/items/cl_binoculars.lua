local a=150.0;local b=7.0;local c=10.0;local d=8.0;local e=8.0;local f=false;local g=(a+b)*0.5;RegisterNetEvent("CMG:toggleBinos",function()f=not f end)function HideHUDThisFrame()HideHelpTextThisFrame()HideHudComponentThisFrame(19)HideHudComponentThisFrame(1)HideHudComponentThisFrame(2)HideHudComponentThisFrame(3)HideHudComponentThisFrame(4)HideHudComponentThisFrame(13)HideHudComponentThisFrame(11)HideHudComponentThisFrame(12)HideHudComponentThisFrame(15)HideHudComponentThisFrame(18)end;function CheckInputRotation(h,i)local j=GetCamRot(h,2)local k=GetDisabledControlNormal(0,220)local l=GetDisabledControlNormal(0,221)if k~=0.0 or l~=0.0 then new_z=j.z+k*-1.0*e*(i+0.1)new_x=math.max(math.min(20.0,j.x+l*-1.0*d*(i+0.1)),-89.5)SetCamRot(h,new_x,0.0,new_z,2)end end;function HandleZoom(h)if not IsPedInAnyVehicle(CMG.getPlayerPed(),true)then if IsControlJustPressed(0,32)then g=math.max(g-c,b)end;if IsControlJustPressed(0,8)then g=math.min(g+c,a)end;local m=GetCamFov(h)if math.abs(g-m)<0.1 then g=m end;SetCamFov(h,m+(g-m)*0.05)else if IsControlJustPressed(0,241)then g=math.max(g-c,b)end;if IsControlJustPressed(0,242)then g=math.min(g+c,a)end;local m=GetCamFov(h)if math.abs(g-m)<0.1 then g=m end;SetCamFov(h,m+(g-m)*0.05)end end;function RotAnglesToVec(n)local o=math.rad(n.z)local p=math.rad(n.x)local q=math.abs(math.cos(p))return vector3(-math.sin(o)*q,math.cos(o)*q,math.sin(p))end;CreateThread(function()while true do if f then if not IsPedInAnyVehicle(CMG.getPlayerPed(),true)then TaskStartScenarioInPlace(CMG.getPlayerPed(),"WORLD_HUMAN_BINOCULARS",0,1)end;Wait(2000)SetTimecycleModifier("heliGunCam")SetTimecycleModifierStrength(0.3)local r=RequestScaleformMovie("binoculars")while not HasScaleformMovieLoaded(r)do Wait(1)end;local h=CreateCam("DEFAULT_SCRIPTED_FLY_CAMERA",true)AttachCamToEntity(h,CMG.getPlayerPed(),0.0,0.0,1.0,true)SetCamRot(h,0.0,0.0,GetEntityHeading(CMG.getPlayerPed()))SetCamFov(h,g)RenderScriptCams(true,false,0,1,0)ScaleformMovieMethodAddParamInt(0)EndScaleformMovieMethod()local s=nil;while f and not IsPedInAnyVehicle(CMG.getPlayerPed(),true)do if IsControlJustPressed(0,38)then PlaySoundFrontend(-1,"SELECT","HUD_FRONTEND_DEFAULT_SOUNDSET",false)ClearPedTasks(CMG.getPlayerPed())f=false end;if not s then local i=1.0/(a-b)*(g-b)CheckInputRotation(h,i)end;HandleZoom(h)HideHUDThisFrame()DrawScaleformMovieFullscreen(r,255,255,255,255)Wait(1)end;f=false;ClearTimecycleModifier()g=(a+b)*0.5;RenderScriptCams(false,false,0,1,0)SetScaleformMovieAsNoLongerNeeded(r)DestroyCam(h,false)SetNightvision(false)SetSeethrough(false)end;Wait(0)end end)